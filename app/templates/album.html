<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–æ–π –∞–ª—å–±–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
<style>
body{font-family:Arial,sans-serif;max-width:1200px;margin:0 auto;padding:20px;background:#f9f9f9}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:#fff;padding:20px;border-radius:8px}
h1{color:#333;margin:0}
.upload-more{display:inline-block;padding:10px 20px;background:#4CAF50;color:white;text-decoration:none;border-radius:4px}
.upload-more:hover{background:#45a049}
.image-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}
.image-item{border:1px solid #ddd;border-radius:8px;overflow:hidden;background:#fff}
.image-item img{width:100%;height:200px;object-fit:cover;display:block}
.image-info{padding:15px}
.image-name{font-weight:bold;margin-bottom:5px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.copy-btn{background:#2196F3;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px}
.copy-btn:hover{background:#0b7dda}
.copy-btn.copied{background:#4CAF50}
.empty-state{text-align:center;padding:60px 20px;background:#fff;border-radius:8px}
.empty-icon{font-size:64px;margin-bottom:20px;color:#ccc}
.empty-text{font-size:18px;color:#666;margin-bottom:20px}
.empty-link{display:inline-block;padding:10px 20px;background:#4CAF50;color:white;text-decoration:none;border-radius:4px}
.empty-link:hover{background:#45a049}
.pagination{display:flex;justify-content:center;margin-top:30px;gap:10px}
.pagination a,.pagination span{padding:8px 16px;border:1px solid #ddd;border-radius:4px;text-decoration:none;color:#333}
.pagination a:hover{background:#f5f5f5}
.pagination .current{background:#4CAF50;color:white;border-color:#4CAF50}
@media(max-width:768px){
.header{flex-direction:column;gap:15px;text-align:center}
.image-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}
}
</style>
</head>
<body>
<div class="header">
<h1>–ú–æ–π –∞–ª—å–±–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>
<a href="/" class="upload-more">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ</a>
</div>
{{if .HasImages}}
<div class="image-grid" id="imageGrid">
{{range .Images}}
<div class="image-item">
<img src="/image/{{$.SessionID}}/{{.Filename}}" alt="{{.Filename}}">
<div class="image-info">
<div class="image-name">{{.Filename}}</div>
<button class="copy-btn" onclick="copyUrl('{{$.SessionID}}','{{.Filename}}',this)">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL</button>
</div>
</div>
{{end}}
</div>
{{else}}
<div class="empty-state">
<div class="empty-icon">üì∑</div>
<div class="empty-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>
<a href="/" class="empty-link">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</a>
</div>
{{end}}
{{if .HasPagination}}
<div class="pagination">
{{if gt .CurrentPage 0}}
<a href="/album?page={{sub .CurrentPage 1}}">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
{{end}}
{{$currentPage:=.CurrentPage}}
{{range $i:=iterate .TotalPages}}
{{if eq $i $currentPage}}
<span class="current">{{add $i 1}}</span>
{{else}}
<a href="/album?page={{$i}}">{{add $i 1}}</a>
{{end}}
{{end}}
{{if lt .CurrentPage (sub .TotalPages 1)}}
<a href="/album?page={{add .CurrentPage 1}}">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
{{end}}
</div>
{{end}}
<script>
function copyUrl(sessionID,filename,button){
const url=window.location.origin+'/image/'+sessionID+'/'+filename;
if(navigator.clipboard){
navigator.clipboard.writeText(url).then(function(){
const originalText=button.textContent;
button.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
button.classList.add('copied');
setTimeout(function(){button.textContent=originalText;button.classList.remove('copied')},2000);
}).catch(function(err){console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL: ',err)});
}else{
const textArea=document.createElement('textarea');
textArea.value=url;
document.body.appendChild(textArea);
textArea.focus();
textArea.select();
try{
document.execCommand('copy');
const originalText=button.textContent;
button.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
button.classList.add('copied');
setTimeout(function(){button.textContent=originalText;button.classList.remove('copied')},2000);
}catch(err){console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL: ',err)}
document.body.removeChild(textArea);
}
}
</script>
</body>
</html>