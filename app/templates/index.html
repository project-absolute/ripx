<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–•–æ—Å—Ç–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
<style>
body{font-family:Arial,sans-serif;max-width:800px;margin:0 auto;padding:20px;background:#f9f9f9}
h1{color:#333;text-align:center}
.upload-container{margin:30px 0}
.upload-area{border:3px dashed #ccc;border-radius:10px;padding:40px;text-align:center;margin:20px 0;background:#fff;cursor:pointer}
.upload-area:hover{border-color:#999;background:#f5f5f5}
.upload-area.dragover{border-color:#4CAF50;background:#e8f5e8}
.upload-icon{font-size:48px;color:#ccc;margin-bottom:15px}
.upload-text{font-size:18px;color:#666;margin-bottom:15px}
.upload-hint{font-size:14px;color:#999}
form{margin-top:20px}
input[type="file"]{display:none}
.file-input-label{display:inline-block;padding:10px 20px;background:#4CAF50;color:white;border-radius:4px;cursor:pointer}
.file-input-label:hover{background:#45a049}
.upload-button{background:#2196F3;color:white;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;margin-left:10px}
.upload-button:hover{background:#0b7dda}
.album-select{margin-bottom:15px}
.album-select select{padding:8px;border:1px solid #ddd;border-radius:4px;width:100%}
.albums-container{margin:30px 0}
.albums-title{font-size:20px;color:#333;margin-bottom:15px}
.albums-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}
.album-item{border:1px solid #ddd;border-radius:8px;padding:15px;background:#fff;text-align:center}
.album-item:hover{background:#f5f5f5}
.album-link{text-decoration:none;color:#333;font-weight:bold}
.album-link:hover{color:#2196F3}
.album-count{font-size:14px;color:#666;margin-top:5px}
.create-album-form{margin:30px 0;padding:20px;background:#fff;border-radius:8px;border:1px solid #ddd}
.create-album-title{font-size:18px;color:#333;margin-bottom:15px}
.create-album-button{background:#4CAF50;color:white;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}
.create-album-button:hover{background:#45a049}
</style>
</head>
<body>
<h1>–•–æ—Å—Ç–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>
<p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–º–µ–Ω–∞</p>

<!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∞–ª—å–±–æ–º–∞ -->
<div class="create-album-form">
<div class="create-album-title">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–ª—å–±–æ–º</div>
<form action="/create-album" method="post">
<button type="submit" class="create-album-button">–°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º</button>
</form>
</div>

<!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–ª—å–±–æ–º–æ–≤ -->
{{if .HasAlbums}}
<div class="albums-container">
<div class="albums-title">–í–∞—à–∏ –∞–ª—å–±–æ–º—ã</div>
<div class="albums-list">
{{range .Albums}}
<div class="album-item">
<a href="/album?id={{.ID}}" class="album-link">{{.Name}}</a>
<div class="album-count">{{.ImageCount}} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>
</div>
{{end}}
</div>
</div>
{{end}}

<div class="upload-container">
<div class="upload-area" id="uploadArea">
<div class="upload-icon">üìÅ</div>
<div class="upload-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—é–¥–∞</div>
<div class="upload-hint">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤</div>
</div>
<form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
{{if .HasAlbums}}
<div class="album-select">
<select name="album_id" id="albumSelect">
{{range .Albums}}
<option value="{{.ID}}">{{.Name}} ({{.ImageCount}} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)</option>
{{end}}
</select>
</div>
{{end}}
<input type="file" name="image" accept="image/*" multiple id="fileInput">
<label for="fileInput" class="file-input-label">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</label>
<button type="submit" class="upload-button" id="submitButton">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>
</div>
<script>
document.addEventListener('DOMContentLoaded',function(){
const uploadArea=document.getElementById('uploadArea');
const fileInput=document.getElementById('fileInput');
const uploadForm=document.getElementById('uploadForm');
const albumSelect=document.getElementById('albumSelect');
uploadArea.addEventListener('click',function(){fileInput.click()});
fileInput.addEventListener('change',function(){
if(fileInput.files.length>0){
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–ª—å–±–æ–º—ã –¥–ª—è –≤—ã–±–æ—Ä–∞
if(albumSelect && albumSelect.value){
uploadForm.submit();
}else{
alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ –∞–ª—å–±–æ–º –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π');
}
}
});
uploadArea.addEventListener('dragover',function(e){e.preventDefault();uploadArea.classList.add('dragover')});
uploadArea.addEventListener('dragleave',function(e){e.preventDefault();uploadArea.classList.remove('dragover')});
uploadArea.addEventListener('drop',function(e){
e.preventDefault();uploadArea.classList.remove('dragover');
const files=e.dataTransfer.files;
if(files.length>0){
fileInput.files=files;
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–ª—å–±–æ–º—ã –¥–ª—è –≤—ã–±–æ—Ä–∞
if(albumSelect && albumSelect.value){
uploadForm.submit();
}else{
alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ –∞–ª—å–±–æ–º –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π');
}
}
});
});
</script>
</body>
</html>